<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<!--  tb 59 -->
<?xml-stylesheet href="chrome://messenger/skin/preferences/preferences.css" type="text/css" ?>
<?xml-stylesheet href="chrome://quickfilters/content/options.css" title="QuickFiltersOptions" type="text/css"?>
<?xml-stylesheet href="chrome://quickfilters/content/filterWidgets.css" type="text/css"?>

<!DOCTYPE dialog [
  <!ENTITY % optionsDTD SYSTEM "chrome://quickfilters/locale/options.dtd">
  %optionsDTD;
  <!ENTITY % commonDTD SYSTEM "chrome://quickfilters/locale/filterList.dtd">
  %commonDTD;
]>

<dialog id="quickfilters-preferences"
				buttons="extra2,accept"
				buttonlabelextra2="__MSG_donate.label__"
				xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
				xmlns:html="http://www.w3.org/1999/xhtml"
				title="__MSG_prefwindow.title__"
				autostretch="always"
				minHeight="400"
				ondialogextra2="setTimeout(function() {quickFilters.Licenser.showDialog('options_' + quickFilters.Options.currentOptionsTab); window.close(); });"
				tooltiptextextra2="__MSG_qf.label.supportWithLicense__"
				>

	<script type="application/javascript" src="chrome://quickfilters/content/quickFilters.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-preferences.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-utils.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-options.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-rsa.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-register.js" />
	<script type="application/javascript" src="chrome://quickfilters/content/qFilters-worker.js" />

  <prefpane id="mainOptions" label="__MSG_pane1.title__" flex="2" selected="true" orient="vertical">

    <preferences>
<!--Actions -->
      <preference id="abort"
	              name="extensions.quickfilters.abortAfterCreate"
								type="bool"
								instantApply="true"
								/>
      <preference id="autoStart"
	              name="extensions.quickfilters.autoStart"
								type="bool"
								instantApply="true"
								/>
      <preference id="toolbar"
	              name="extensions.quickfilters.toolbar"
								type="bool"
								instantApply="true"
								/>
      <preference id="showListAfterCreateFilter"
	              name="extensions.quickfilters.showListAfterCreateFilter"
								type="bool"
								instantApply="true"
								/>
      <preference id="showEditorAfterCreateFilter"
	              name="extensions.quickfilters.showEditorAfterCreateFilter"
								type="bool"
								instantApply="true"
								/>
      <preference id="runImapOnRead"
	              name="mail.imap.filter_on_new"
								type="bool"
								instantApply="true"
								/>

			<preference id="onewayaddresses"
									name="extensions.quickfilters.searchterm.addressesOneWay"
									type="bool"
									instantApply="true"
						/>
			<preference id="merge.autoSelect"
									name="extensions.quickfilters.merge.autoSelect"
									type="bool"
									instantApply="true"
						/>
			<preference id="merge.silent"
									name="extensions.quickfilters.merge.silent"
									type="bool"
									instantApply="true"
						/>
			<preference id="insertNewTermTop"
									name="extensions.quickfilters.searchterm.insertOnTop"
									type="bool"
									instantApply="true"
						/>


<!--New Filter Properties -->
      <preference id="newfilter.autorun"
	              name="extensions.quickfilters.newfilter.autorun"
								type="bool"
								instantApply="true"
								/>


      <preference id="newfilter.manual"
	              name="extensions.quickfilters.newfilter.manual"
								type="bool"
								instantApply="true"
								/>

			<preference id="newfilter.runAfterPlugins"
	              name="extensions.quickfilters.newfilter.runAfterPlugins"
								type="bool"
								instantApply="true"
								/>
      <preference id="newfilter.runArchiving"
	              name="extensions.quickfilters.newfilter.runArchiving"
								type="bool"
								instantApply="true"
								/>
      <preference id="newfilter.runPostOutgoing"
	              name="extensions.quickfilters.newfilter.runPostOutgoing"
								type="bool"
								instantApply="true"
								/>
      <preference id="newfilter.runPeriodically"
	              name="extensions.quickfilters.newfilter.runPeriodically"
								type="bool"
								instantApply="true"
								/>

      <preference id="newfilter.insertAlphabetical"
	              name="extensions.quickfilters.newfilter.insertAlphabetical"
								type="bool"
								instantApply="true"
								/>
			<preference id="naming.parentFolder"
									name="extensions.quickfilters.naming.parentFolder"
									type="bool"
									instantApply="true"
									/>
			<preference id="naming.folderDelimiter"
									name="extensions.quickfilters.naming.folderDelimiter"
									type="unichar"
									/>
			<preference id="naming.keyWord"
									name="extensions.quickfilters.naming.keyWord"
									type="bool"
									instantApply="true"
									/>
			<preference id="cloned.append"
									name="extensions.quickfilters.naming.clonedLabel"
									type="string"
									instantApply="true"
						/>
			<preference id="listen.tags"
									name="extensions.quickfilters.listener.tags"
									type="bool"
									instantApply="true"
						/>
			<preference id="listen.tags.autofilter"
									name="extensions.quickfilters.listener.tags.autofilter"
									type="bool"
									instantApply="true"
						/>
<!--Advanced Tab-->
			<preference id="templates.replyTo"
									name="extensions.quickfilters.templates.replyTo"
									type="bool"
									instantApply="true"
									/>
			<preference id="templates.custom"
									name="extensions.quickfilters.templates.custom"
									type="bool"
									instantApply="true"
									/>
                  
			<preference id="filters.multipaste"
									name="extensions.quickfilters.multipaste"
									type="bool"
									instantApply="true"
									/>
                  
			<preference id="curFolderbar.listbutton"
									name="extensions.quickfilters.quickfolders.curFolderbar.listbutton"
									type="bool"
									instantApply="true"
						/>
			<preference id="curFolderbar.folderbutton"
									name="extensions.quickfilters.quickfolders.curFolderbar.folderbutton"
									type="bool"
									instantApply="true"
									/>
			<preference id="curFolderbar.messagesbutton"
									name="extensions.quickfilters.quickfolders.curFolderbar.messagesbutton"
									type="bool"
									instantApply="true"
									/>
			<preference id="curFolderbar.findfilterbutton"
									name="extensions.quickfilters.quickfolders.curFolderbar.findfilterbutton"
									type="bool"
									instantApply="true"
									/>
      <preference id="debug"
	              name="extensions.quickfilters.debug"
								type="bool"
								instantApply="true"
								/>
      <preference id="localFoldersRun"
	              name="extensions.quickfilters.localFoldersRun"
								type="bool"
								instantApply="true"
								/>
      <preference id="ShortcutFolders"
	              name="extensions.quickfilters.shortcuts.folder"
								type="bool"
								instantApply="true"
                onchange="quickFilters.Options.configureShortcut(this,'folder');" />
      <preference id="Key_ShortcutFolders"
	              name="extensions.quickfilters.shortcuts.folder.key"
								type="string"
                />
      <preference id="ShortcutSelectedMails"
	              name="extensions.quickfilters.shortcuts.mails"
								type="bool"
								instantApply="true"
                onchange="quickFilters.Options.configureShortcut(this,'mails');" />
      <preference id="Key_ShortcutSelectedMails"
	              name="extensions.quickfilters.shortcuts.mails.key"
								type="string"
                />

    </preferences>

	<box id="quickFiltersHelpBar">
		<toolbarbutton id="quickFiltersBtnHelp"
		  class = "toolbarbutton-1 chromeclass-toolbar-additional"
		  label = ""
		  tooltiptext = "__MSG_quickfilters.button.support__"
		  oncommand = "quickFilters.Util.showHomePage('index.html#options');"
		  />
	</box>

  <hbox id="qf-header-container">
    <vbox>
      <image id="qf-options-icon" src="chrome://quickfilters/content/skin/QuickFilters_32.svg" flex="0"/>
    </vbox>
	<hbox id="qf-options-header" class="paneSelector">
	  <image id="qf-title" src="chrome://quickfilters/content/skin/QuickFilters-title.png" flex="0"/>
		<label id="qf-options-version"
		       oncontextmenu="quickFilters.Util.showVersionHistory(true);setTimeout(function() {window.close();});return false;"
		       tooltiptext="__MSG_qf.options.versionnumber.tooltip__"
		       value="0.1"/>
	</hbox>
    <vbox>
    <box id="qf-youtubeBox">
			<image id="qf-youtube"
			       src="chrome://quickfilters/content/skin/youtube.png"
			       tooltiptext="__MSG_qf.youtube.tbdaily__"
			       onclick="quickFilters.Util.showYouTube();" />
    </box>
    </vbox>
  </hbox>

	<tabbox orient="vertical" flex="6" id="quickFilters-Options-Tabbox">
		<tabs>
			<tab label="__MSG_qf.tab.actions__" id="quickFilters-Actions" />
			<tab label="__MSG_qf.tab.newFilterProps__" id="quickFilters-FilterProperties" />
			<tab label="__MSG_qf.tab.advanced__" id="quickFilters-Advanced" />
			<tab label="__MSG_qf.tab.support__" id="quickFilters-Support" />
			<tab label="__MSG_qf.tab.gopro__"  id="quickFilters-Pro" class="free" />
		</tabs>

		<tabpanels id="quickFilters-Panels">

			<tabpanel id="quickFilters-Options-actions"
			          orient="vertical"
			          label="__MSG_qf.tab.options__"
			          style="position:relative;">
			<hbox>
				<vbox>
					<checkbox id="chkAutoClose"
								preference="abort"
								label="__MSG_chkAutoClose.label__"
								accesskey="__MSG_chkAutoClose.accesskey__"
								/>
					<checkbox id="chkAutoStart"
								preference="autoStart"
								label="__MSG_chkAutoStart.label__"
								accesskey="__MSG_chkAutoStart.accesskey__"
								/>
					<checkbox id="chkToolbar"
								preference="toolbar"
								label="__MSG_chkToolbar.label__"
								accesskey="__MSG_chkToolbar.accesskey__"
								/>
					<checkbox id="chkShowList"
								preference="showListAfterCreateFilter"
								label="__MSG_chkShowList.label__"
								tooltiptext="__MSG_chkShowList.tooltip__"
								/>
					<checkbox id="chkShowEditor"
								preference="showEditorAfterCreateFilter"
								label="__MSG_chkShowEditor.label__"
								/>
					<checkbox
								preference="runImapOnRead"
								label="__MSG_chkImapOnRead.label__"
								/>

				</vbox>
				<vbox>
					<checkbox id="chkListTags"
								preference="listen.tags"
								label="__MSG_qf.listener.tags__"
								tooltiptext="__MSG_qf.listener.tags.tooltip__"
								/>
					<checkbox id="chkListTags"
								preference="listen.tags.autofilter"
								label="__MSG_qf.listener.tags.autofilter__"
								/>
					<checkbox preference="onewayaddresses"
								label="__MSG_qf.onewayaddress.label__"
								tooltiptext="__MSG_qf.onewayaddress.tooltip__"
								/>

					<label id="getCopySentToCurrent"
								 tooltiptext="https://addons.thunderbird.net/en-US/thunderbird/addon/copy-sent-to-current/"
								 onclick="quickFilters.Util.openURLInTab('https://addons.thunderbird.net/en-US/thunderbird/addon/copy-sent-to-current/');">Get 'Copy Sent to Current'</label>
				</vbox>
			</hbox>

			<separator class="groove-thin" />
			<hbox>
				<html:fieldset orient="vertical">
					<html:legend>__MSG_grpMerge.label__</html:legend>
					<vbox>
						<checkbox id="chkMergeAuto"
								preference="merge.autoSelect"
								label="__MSG_chkMergeAuto.label__"
								tooltiptext="__MSG_chkMergeAuto.tooltip__"
								oncommand="quickFilters.Assistant.selectMergeAuto(this);"
								/>
						<checkbox id="chkMergeSkip"
								preference="merge.silent"
								label="__MSG_chkMergeSkip.label__"
								tooltiptext="__MSG_chkMergeSkip.tooltip__"
								oncommand="quickFilters.Assistant.selectMergeSkip(this);"
								/>
						<checkbox id="chkInsertRulesAtTop"
								preference="insertNewTermTop"
								label="__MSG_chkInsertRulesAtTop.label__"
								/>
					</vbox>

				</html:fieldset>
			</hbox>
    </tabpanel>

		<!-- contextAfterCls.label AFTER JUNK -->

	  <tabpanel id="quickFilters-Options-newFilterProps"
			  orient="horizontal"
			  label="__MSG_qf.tab.newFilterProps__"
			  style="position:relative;">
			<vbox>
				<html:fieldset orient="vertical">
					<html:legend>__MSG_qf.grp.whenToRun__</html:legend>
					<vbox>
						<checkbox id="chkAutoRun"
								preference="newfilter.autorun"
								label="__MSG_chkAutoRun.label__"
								/>
						<checkbox id="chkRunManual"
								preference="newfilter.manual"
								label="__MSG_chkRunManual.label__"
								/>
						<checkbox id="chkAfterJunk"
								preference="newfilter.runAfterPlugins"
								label="__MSG_chkAfterJunk.label__"
								/>
						<checkbox id="chkWhenArchiving"
								preference="newfilter.runArchiving"
								label="__MSG_chkWhenArchiving.label__"
								/>
						<checkbox id="chkAfterSending"
								preference="newfilter.runPostOutgoing"
								label="__MSG_chkAfterSending.label__"
								/>
						<checkbox id="chkPeriodically"
								preference="newfilter.runPeriodically"
								label="__MSG_chkPeriodically.label__"
								tooltiptext="__MSG_chkPeriodically.tooltip__"
								/>
					</vbox>
				</html:fieldset>
				<checkbox id="chkAlphabetic"
				preference="newfilter.insertAlphabetical"
				label="__MSG_chkAlphabetic.label__"
				tooltiptext="__MSG_chkAlphabetic.tooltip__"
				/>
			</vbox>

			<vbox>
				<html:fieldset orient="vertical" flex="0">
					<html:legend>__MSG_qf.label.naming__</html:legend>
					<vbox>
						<hbox>
							<checkbox id="chkNamingParentFolder"
									preference="naming.parentFolder"
									label="__MSG_qf.label.naming.parentFolder__"
									accesskey="__MSG_qf.label.naming.parentFolder.accesskey__"
									/>
							<spacer flex="1" />
							<label class = "textBoxLabel"
									value="__MSG_qf.label.naming.folderDelimiter__" />
							<html:input
									style = "width: 3em;"
									preference = "naming.folderDelimiter"
									tooltiptext = "__MSG_qf.tooltip.naming.folderDelimiter__"
									/>
						</hbox>
						<checkbox id="chkNamingKeyWord"
								preference="naming.keyWord"
								label="__MSG_qf.label.naming.keyWord__"
								accesskey="__MSG_qf.label.naming.keyWord.accesskey__"
								/>
						<hbox>
							<label class = "textBoxLabel"
									 value="__MSG_qf.cloned.label__" />
							<html:input id = "txtClonedName"
									 preference = "cloned.append"
									 />
						</hbox>
					</vbox>
				</html:fieldset>
			</vbox>
	  </tabpanel>

	  <tabpanel id="quickFilters-Options-Advanced"
				  orient="vertical"
				  label="__MSG_qf.tab.advanced__"
				  style="position:relative;">

			<html:fieldset orient="vertical" >
				<html:legend>__MSG_qf.templates.advanced__</html:legend>
				<vbox>
					<hbox>
						<checkbox preference="templates.replyTo"
											label="__MSG_qf.templates.replyTo.label__"
											tooltiptext="__MSG_qf.templates.replyTo.tooltip__"/>
						<label class="plain-link"
									 tooltiptext="https://www.mozdev.org/bugs/show_bug.cgi?id=25863"
									 onclick="quickFilters.Util.showBug(25863);">[Bug 25863]</label>
					</hbox>
					<hbox>
						<hbox>
							<checkbox preference="templates.custom"
												label="__MSG_qf.templates.customTemplate.label__"
												tooltiptext="__MSG_qf.templates.customTemplate.tooltip__"/>
							<button id="editCustomFilters"
											label="__MSG_qf.templates.customTemplate.edit__"
											oncommand="quickFilters.Util.editCustomTemplates(); window.close();" />
							<button id="newCustomFilter"
											label="__MSG_qf.templates.customTemplate.new__"
											oncommand="if (quickFilters.Util.createCustomTemplate()) {window.close();}" />
						</hbox>
						<vbox>
							<spacer flex="1" />
							<label class="plain-link"
										 tooltiptext="https://www.mozdev.org/bugs/show_bug.cgi?id=25989"
										 onclick="quickFilters.Util.showBug(25989);">[Bug 25989]</label>
							<spacer flex="1" />
						</vbox>
					</hbox>
				</vbox>

			</html:fieldset>
			<html:fieldset orient="vertical" id="currentFolderGroup">
				<html:legend>__MSG_qf.label.currentFolderButtons__</html:legend>
				<vbox>
					<description id="currentFolderDescription">__MSG_qf.description.currentFolderButtons__</description>
          <hbox>
            <vbox flex="1">
              <checkbox id="chkCurrentToolbarFiltersButton"
                preference="curFolderbar.listbutton"
                label="__MSG_chkCurrentToolbar.btn.FilterList.label__"
                oncommand="quickFilters.Options.toggleCurrentFolderButtons_check();"/>
              <checkbox id="chkCurrentToolbarFolderButton"
                preference="curFolderbar.folderbutton"
                label="__MSG_chkCurrentToolbar.btn.RunOnFolder.label__"
                oncommand="quickFilters.Options.toggleCurrentFolderButtons_check();"/>
            </vbox>
            <vbox flex="1">
              <checkbox id="chkCurrentToolbarMessagesButton"
                preference="curFolderbar.messagesbutton"
                label="__MSG_chkCurrentToolbar.btn.RunOnMessages.label__"
                oncommand="quickFilters.Options.toggleCurrentFolderButtons_check();"/>
              <checkbox id="chkCurrentFindFilterButton"
                preference="curFolderbar.findfilterbutton"
                label="__MSG_chkCurrentToolbar.btn.FindFilter.label__"
                tooltiptext="__MSG_chkCurrentToolbar.btn.FindFilter.tooltip__"
                oncommand="quickFilters.Options.toggleCurrentFolderButtons_check();"/>
            </vbox>
          </hbox>
				</vbox>
			</html:fieldset>
			<html:fieldset orient="vertical" id="filterListGroup">
				<html:legend>__MSG_qf.filterlist.group__</html:legend>
        <vbox>
					<hbox>
            <checkbox id="chkMultiPaste"
              preference="filters.multipaste"
              label="__MSG_qf.filterlist.multipaste__"/>   
						<label class="plain-link"
									 tooltiptext="https://github.com/RealRaven2000/quickFilters/issues/20"
									 onclick="quickFilters.Util.showIssue(20);">[Issue 20]</label>
					</hbox>
            
        </vbox>
         
			</html:fieldset>
      
      
			<spacer flex="1" />
			<hbox>

				<spacer flex="1" />
				<checkbox id="chkDebug"
									preference="debug"
									label="__MSG_chkDebug.label__"
									accesskey="__MSG_chkDebug.accesskey__"
									oncontextmenu="quickFilters.Options.toggleBoolPreference(this,true);quickFilters.Util.showAboutConfig(this, 'quickfilters.debug', true);return false;"/>
			</hbox>
			<separator />
	  </tabpanel>

	  <tabpanel id="quickFilters-Options-support"
			          orient="vertical"
			          label="__MSG_qf.tab.options__"
			          style="position:relative;">

        <description class="quickhelp-desc">__MSG_qf.description.about__</description>
        <label id="L1"
               class="text-link"
               tooltiptext="https://quickfilters.quickfolders.org/"
               onclick="quickFilters.Util.showHomePage();">__MSG_qf.label.aboutLink__</label>
        <separator />

        <description class="quickhelp-desc">__MSG_qf.youtube.description__</description>
        <label id="L2"
               class="text-link"
               tooltiptext="https://www.youtube.com/c/thunderbirddaily"
               onclick="quickFilters.Util.showYouTubePage();">__MSG_qf.youtube.link__</label>
        <separator />
        <description id="contactLabel" class="quickhelp-desc">__MSG_qf.description.contactMe__</description>
        <label id="L3"
               class="text-link"
               onclick="quickFilters.Options.sendMail();" >__MSG_qf.label.contactLink__</label>
	  </tabpanel>

		<!-- Licensing tab -->
		<tabpanel id="quickFilters-Options-goPro" orient="vertical">
			<description>__MSG_qf.label.insertLicense__</description>
			<vbox id="licenseContainer">
				<html:textarea id="txtLicenseKey"
							 class="licenseKey"
							 flex="1"
							 multiline="true"
							 rows="4"
							 style="min-height: 4.5em;"
							 tooltiptext="__MSG_qf.label.insertLicense.tooltip__"></html:textarea>
				<hbox>
					<spacer flex="1" />
					<button id="btnPasteLicense"
									label="__MSG_qf.button.pasteLicense__"
									oncommand="quickFilters.Options.pasteLicense();" />
					<button id="btnValidateLicense"
									label="__MSG_qf.button.validateLicense__"
									oncommand="quickFilters.Options.validateLicenseInOptions(false);" />
				</hbox>
			</vbox>
			<separator class = "licenseSeparator" />
			<hbox id="validationResults">
				<vbox>
					<description id="validationPassed" class="niceFont" collapsed="true">__MSG_qf.licenseValidation.passed__</description>
					<description id="validationFailed" class="niceFont licenseError" collapsed="true">__MSG_qf.licenseValidation.failed__</description>
					<description id="validationExpired" class="niceFont licenseWarning" collapsed="true">__MSG_qf.licenseValidation.expired__</description>
					<description id="validationInvalidEmail" class="niceFont licenseWarning" collapsed="true">__MSG_qf.licenseValidation.invalidMail__</description>
					<description id="validationEmailNoMatch" class="niceFont licenseWarning" collapsed="true">__MSG_qf.licenseValidation.notMatchedMail__</description>
					<description id="validationInvalidAddon" class="niceFont licenseError" collapsed="true">__MSG_qf.licenseValidation.invalidAddon__</description>
				</vbox>
				<spacer flex="1"/>
			</hbox>
			<separator class="licenseSeparator" />
			<hbox id="validationDate" align="center">
				<label>__MSG_qf.label.licenseValid__</label>
				<label id="licenseDate" value="-" />
			</hbox>
			<separator  style="height:1em;" />
			<hbox>
				<html:fieldset id="premiumConfig" >
					<html:legend>__MSG_qf.premiumConfig__</html:legend>
					<vbox>
						<hbox>
							<label class="plain-link"
									 tooltiptext="https://quickfilters.quickfolders.org/"
									 onclick="quickFilters.Util.showPremiumFeatures();">__MSG_qf.label.premiumFeaturesSite__</label>
						</hbox>
						<hbox>
              <checkbox id="chkFoldersShortcut"
                  preference="ShortcutFolders"
                  label="__MSG_qf.label.shortcut.runFolder__"
                  />
							<html:input
									style = "width: 3em;"
									preference = "Key_ShortcutFolders"
									/>
						</hbox>
						<hbox>
              <checkbox id="chkMailsShortcut"
                  preference="ShortcutSelectedMails"
                  label="__MSG_qf.label.shortcut.runMails__"
                  />
							<html:input
									style = "width: 3em;"
									preference = "Key_ShortcutSelectedMails"
									/>
						</hbox>
						<checkbox id="chkLocalFoldersAutorun"
								preference="localFoldersRun"
								label="__MSG_chkLocalFoldersAutorun.label__"
								/>
					</vbox>
				</html:fieldset>
			</hbox>
			<!-- will be populated / modified from bundle in code -->
			<hbox>
			  <spacer flex="1" />
				<button id="btnLicense"
								label="Buy License"
								oncommand="setTimeout(function() {quickFilters.Licenser.showDialog('options_' + quickFilters.Options.currentOptionsTab); window.close(); });" />
			  <spacer flex="1" />
			</hbox>
		</tabpanel>


	</tabpanels>
	</tabbox>

  </prefpane>
	<script type="application/javascript" src="chrome://global/content/preferencesBindings.js" />
	<script>
	  quickFilters.Options.loadPreferences(); /* Tb 66 compatibility. Should be called _before_ DOMcontent Loaded event */
	</script>
</dialog>